<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>로그인</title>
    <style>
      /* video{
        position: absolute;
        left: 50%;
        top: 23%;
        transform: translateX(-50%) translateY(-50%);
      } */
      form {
        display: flex;
        flex-direction: column;
        gap: 20px;
        position: absolute;
        /* 부모요소의 크기의 절반만큼을 오른쪽/아래쪽으로 이동시킴 */
        left: 50%;
        top: 50%;
        /* 자기 자신 크기의 절반만큼을 왼쪽/위쪽으로 이동시킴 */
        transform: translateX(-50%) translateY(-50%);
        background-color: rgba(211, 228, 183, 0.5);
        border-radius: 20px;
        width: 500px;
        padding: 2rem;
      }
      form > h1 {
        text-align: center;
        margin: 0;
      }
      form > div:nth-of-type(1) {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }
      form > div:nth-of-type(1) label input {
        width: 200px;
        height: 35px;
      }
      form > div:nth-of-type(2) {
        display: flex;
        gap: 20px;
        justify-content: center;
        text-align: center;
        margin: 10px;
      }
      form > div:nth-of-type(2) >button {
        background-color: #FEFEDF;
        border: 1px solid #458871;
        color: black;
        font-weight: bold;
        border-radius: 5px;
        box-shadow: 0 2px 8px -1px rgb(96, 108, 56);
        cursor: pointer;
      }
      form > div:nth-of-type(2) > button:nth-of-type(2) > a {
        text-decoration: none;
        color: white;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <form action="http://localhost:8080/auth/signin" method="post">
      <h1>special pet</h1>
      <video width="500px" height="250px" autoplay muted loop>
        <source src="../video/AdobeStock_246919757.mov"></source>
        <source src="../video/AdobeStock_464922686.mov"></source>
        <strong>Your browser does not support the video tag.</strong>
      </video>
      <div>
        <label><input type="text" name="userid" placeholder="아이디" /></label>
        <label
          ><input type="password" name="password" placeholder="비밀번호"
        /></label>
      </div>
      <div>
        <button>로그인</button>
        <button>회원가입</button>
      </div>
    </form>
    <script>
      const params = new URLSearchParams(window.location.search);
      if (params.get("err")) {
        console.log(params.get("err"));
        alert(params.get("err"));
        history.replaceState(null, null, "http://localhost:5500/auth/login.html");
      }
    </script>
    <script>
      const signin = document.forms[0].querySelectorAll("button")[0];
      const id = document.forms[0].querySelectorAll("input")[0];
      const pass = document.forms[0].querySelectorAll("input")[1];
      //로그인
      signin.addEventListener("click", (e) => {
        e.preventDefault();
        filledCheck();
      });
      id.addEventListener("keyup", (e) => {
        e.preventDefault();
        if(e.key.toLowerCase() === "enter"){
          filledCheck();
        }
      });
      pass.addEventListener("keyup", (e) => {
        e.preventDefault();
        if(e.key.toLowerCase() === "enter"){
          filledCheck();
        }
      });
      function filledCheck(){
        const id = document.forms[0].querySelectorAll("input")[0];
        const pass = document.forms[0].querySelectorAll("input")[1];
        if (!id.value) {
          alert("사용자 이름을 입력해주세요.");
          return;
        }
        if (!pass.value) {
          alert("비밀번호를 입력해주세요.");
          return;
        }
        if(id.value && pass.value){
          document.forms[0].submit();
        }
      }
      const signup = document.forms[0].querySelectorAll("button")[1];
      //회원가입
      signup.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.replace("http://localhost:5500/auth/signup.html");
      });
    </script>
  </body>
</html>
